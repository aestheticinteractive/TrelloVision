
$(init);


////////////////////////////////////////////////////////////////////////////////////////////////////////
/*----------------------------------------------------------------------------------------------------*/
function init() {
}


////////////////////////////////////////////////////////////////////////////////////////////////////////
/*----------------------------------------------------------------------------------------------------*/
function trelloAuth(onSuccess) {
	var opt = {
		type: "redirect",
		name: "TrelloVision",
		scope: { read: true },
		success: function() {
			trelloAuthSuccess();
			onSuccess();
		},
		error: this.trelloAuthError
	};

	Trello.authorize(opt);
}

/*----------------------------------------------------------------------------------------------------*/
function trelloReAuth() {
	Trello.deauthorize();
	trelloAuth();
}

/*----------------------------------------------------------------------------------------------------*/
function trelloAuthCheck() {
	if ( !Trello.authorized() ) {
		trelloAuthError();
		return false;
	}

	return true;
}

/*----------------------------------------------------------------------------------------------------*/
var trelloAuthSuccess = function() {
	if ( !trelloAuthCheck() ) {
		return;
	}
};

/*----------------------------------------------------------------------------------------------------*/
function trelloAuthError() {
	$("#dialogAuthFail").dialog("open");
}